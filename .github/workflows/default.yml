name: Update latest data
on:
  workflow_dispatch
  schedule:
    - cron: "30 9,10 * * 4" # Run at 5:30 and 6:30 pm every Thuesday Eastern Time (cron is in UTC)
jobs:
  update-data:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."
      - uses: actions/setup-node@v2
        with:
          node-version: "14.16.1"
      - name: Install dependencies
        run: yarn install
      - name: Fetch latest data file
        run: ./downloadDataFile.js
      - name: Verify successful build
        run: yarn build
      - name: Commit & Push changes
        uses: actions-js/push@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
